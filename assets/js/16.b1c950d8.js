(window.webpackJsonp=window.webpackJsonp||[]).push([[16],{196:function(t,s,a){"use strict";a.r(s);var n=a(0),e=Object(n.a)({},function(){this.$createElement;this._self._c;return this._m(0)},[function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("div",{staticClass:"content"},[a("h3",{attrs:{id:"使用travis-ci持续集成vue项目，在gh-pages上预览"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#使用travis-ci持续集成vue项目，在gh-pages上预览","aria-hidden":"true"}},[t._v("#")]),t._v(" 使用Travis CI持续集成Vue项目，在gh-pages上预览")]),t._v(" "),a("blockquote",[a("p",[t._v("@2018-08-01")])]),t._v(" "),a("ol",[a("li",[a("p",[t._v("登录 https://travis-ci.org/ （使用github账户登录，可以同步所有仓库）")])]),t._v(" "),a("li",[a("p",[t._v("选择需要同步的vue项目，勾上，点击settings")])]),t._v(" "),a("li",[a("p",[t._v("Environment Variables中添加参数")])])]),t._v(" "),a("pre",[a("code",[t._v("- GH_REF    `github.com/<GITHUB_ACCOUNT>/<repo>`\n- GH_TOKEN\n- UESR_EMAIL\n- USER_NAME\n")])]),t._v(" "),a("ol",{attrs:{start:"4"}},[a("li",[a("p",[t._v("首先修改vue项目中的"),a("code",[t._v("config/index.js")]),t._v("中的build对象，"),a("code",[t._v("assetsPublicPath: ''")]),t._v("（原来是'./'）")])]),t._v(" "),a("li",[a("p",[t._v("项目根目录下新建"),a("code",[t._v(".travis.yml")]),t._v("文件")]),t._v(" "),a("div",{staticClass:"language-yaml extra-class"},[a("pre",{pre:!0,attrs:{class:"language-yaml"}},[a("code",[t._v("   "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# .travis.yml")]),t._v("\n   "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("language")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" node_js\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# nodejs版本")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("node_js")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" \n        "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'8.11.1'")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# Travis-CI Caching")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("cache")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("directories")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" node_modules\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# S: Build Lifecycle")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("install")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" npm install\n    "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("script")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" npm run build\n    "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("after_script")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" cd ./dist\n      "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" git init\n      "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(' git config user.name "$'),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("USER_NAME"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v('"\n      '),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(' git config user.email "$'),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("UESR_EMAIL"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v('"\n      '),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" git add .\n      "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" git commit "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v('m "Update tools"\n      '),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" git push "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v("force "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v('quiet "https'),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("//$"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("GH_TOKEN"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("@$"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("GH_REF"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v('" master'),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("gh"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v("pages\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# E: Build LifeCycle")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#指定分支，只有指定的分支提交时才会运行脚本")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("branches")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("only")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" master\n")])])])]),t._v(" "),a("li",[a("p",[t._v("将项目push进github仓库")])]),t._v(" "),a("li",[a("p",[t._v("完成后，在Travis CI的Job log中可以看到部署进度")])]),t._v(" "),a("li",[a("p",[t._v("最后，在github仓库中就可以看到gh-pages，将此分支设置为gh-pages功能，即可在线预览")])])])])}],!1,null,null,null);e.options.__file="deploy-vue-with-travis.md";s.default=e.exports}}]);